{"version":3,"sources":["webpack://BCI2K/webpack/universalModuleDefinition","webpack://BCI2K/webpack/bootstrap","webpack://BCI2K/./bci2k.ts","webpack://BCI2K/external \"websocket\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE__1__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","websocket","w3cwebsocket","BCI2K_DataConnection","address","_socket","onconnect","onGenericSignal","data","onStateVector","onSignalProperties","onStateFormat","ondisconnect","onReceiveBlock","callingFrom","states","signal","signalProperties","stateFormat","stateVecOrder","SignalType","INT16","FLOAT24","FLOAT32","INT32","dv","val","count","byteLength","v","getUint8","String","fromCharCode","connection","undefined","Promise","resolve","reject","binaryType","onerror","onopen","onclose","e","setTimeout","console","log","connect","onmessage","event","_decodeMessage","readyState","OPEN","descriptor","DataView","stateFormatView","_decodeStateFormat","supplement","genericSignalView","_decodeGenericSignal","signalPropertyView","_decodeSignalProperties","error","toString","stateVectorView","_decodeStateVector","unitstr","units","unit","split","idx","offset","Number","gain","symbol","vmin","vmax","propstr","getNullTermString","replace","prop_tokens","props","length","trim","push","pidx","channels","numChannels","parseInt","elements","numElements","numelements","signaltype","channelunit","_decodePhysicalUnits","slice","join","elementunit","valueunits","lines","lineIdx","stateline","bitWidth","defaultValue","byteLocation","bitLocation","vecOrder","state","loc","sort","a","b","index","signalType","nChannels","getUint16","nElements","byteOffset","signalData","buffer","ch","el","getInt16","getFloat32","getInt32","_stateVectorLength","stateVectorLength","_numVectors","numVectors","Array","fill","vecIdx","vec","Uint8Array","bits","byteIdx","stateIdx","fmt","mask","bIdx","bciOperator","onStateChange","_execid","_exec","opcode","id","contents","JSON","parse","location","locationParameter","execute","then","indexOf","dataConnection","instruction","connected","exec","send","stringify","x","ip","port","setInterval","allData","forEach","line","descriptors","dataType","names","low","high","comment","bciData"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"websocket\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"websocket\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"BCI2K\"] = factory(require(\"websocket\"));\n\telse\n\t\troot[\"BCI2K\"] = factory(root[\"websocket\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE__1__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/home/chris/development/bci2000/BCI2K/BCI2Kjs_ws/dist\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// ======================================================================== //\n//\n// bci2k.js\n// A javascript connector for BCI2000\n//\n// ======================================================================== //\n\n//To see how the BCI2000 messages are implemented in BCI2000 see here:\n// https://www.bci2000.org/mediawiki/index.php/Technical_Reference:BCI2000_Messages\n\nconst websocket = require(\"websocket\").w3cwebsocket;\n\nclass BCI2K_OperatorConnection {\n  websocket: WebSocket;\n  _execid: any;\n  _exec: any;\n  state: any;\n  ondisconnect: any;\n  onStateChange: any;\n  address: string;\n\n  constructor(address?: string) {\n    this.ondisconnect = () => {};\n    this.onStateChange = (event: string) => {};\n\n    // this.websocket = null;\n    this._execid = 0;\n    this._exec = {};\n    this.state = \"\";\n    this.address = address;\n  }\n\n  public connect(address?: string): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (this.address === undefined) {\n        this.address =\n          address || \"ws://127.0.0.1:80\" || `ws://{window.location.host}`;\n      }\n\n      this.websocket = new websocket(this.address);\n\n      this.websocket.onerror = (error) => {\n        // This will only execute if we err before connecting, since\n        // Promises can only get triggered once\n        reject(\"Error connecting to BCI2000 at \" + this.address);\n      };\n\n      this.websocket.onopen = () => {\n        resolve();\n      };\n\n      this.websocket.onclose = () => {\n        this.ondisconnect();\n      };\n\n      this.websocket.onmessage = (event) => {\n        let { opcode, id, contents } = JSON.parse(event.data);\n        switch (opcode) {\n          case \"O\": // OUTPUT: Received output from command\n            this._exec[id](contents);\n            delete this._exec[id];\n            break;\n          default:\n            break;\n        }\n      };\n    });\n  }\n\n  public tap(location: string) {\n    let connection = this;\n\n    let locationParameter = \"WS\" + location + \"Server\";\n\n    return this.execute(\"Get Parameter \" + locationParameter).then(\n      (location: string) => {\n        if (location.indexOf(\"does not exist\") >= 0) {\n          return Promise.reject(\"Location parameter does not exist\");\n        }\n        if (location === \"\") {\n          return Promise.reject(\"Location parameter not set\");\n        }\n\n        let dataConnection = new BCI2K_DataConnection();\n\n        // Use our address plus the port from the result\n        return dataConnection\n          .connect(connection.address + \":\" + location.split(\":\")[1], \"\")\n          .then((event) => {\n            // To keep with our old API, we actually want to wrap the\n            // dataConnection, and not the connection event\n            // TODO This means we can't get the connection event!\n            return dataConnection;\n          });\n      }\n    );\n  }\n\n  public connected() {\n    return (\n      this.websocket !== null && this.websocket.readyState === websocket.OPEN\n    );\n  }\n\n  public execute(instruction: string) {\n    let connection = this;\n    if (this.connected()) {\n      return new Promise((resolve, reject) => {\n        let id = (++connection._execid).toString();\n        // TODO Properly handle errors from BCI2000\n        connection._exec[id] = (exec) => resolve(exec);\n        connection.websocket.send(\n          JSON.stringify({\n            opcode: \"E\",\n            id: id,\n            contents: instruction,\n          })\n        );\n      });\n    }\n    // Cannot execute if not connected\n    return Promise.reject(\n      \"Cannot execute instruction: not connected to BCI2000\"\n    );\n  }\n\n  getVersion() {\n    this.execute(\"Version\").then((x: string) => console.log(x.split(\" \")[1]));\n  }\n\n  showWindow() {\n    return this.execute(\"Show Window\");\n  }\n\n  hideWindow() {\n    return this.execute(\"Hide Window\");\n  }\n\n  setWatch(state: string, ip: string, port: string) {\n    return this.execute(\"Add watch \" + state + \" at \" + ip + \":\" + port);\n  }\n\n  resetSystem() {\n    return this.execute(\"Reset System\");\n  }\n\n  setConfig() {\n    return this.execute(\"Set Config\");\n  }\n\n  start() {\n    return this.execute(\"Start\");\n  }\n\n  stop() {\n    return this.execute(\"Stop\");\n  }\n\n  kill() {\n    return this.execute(\"Exit\");\n  }\n\n  stateListen() {\n    setInterval(() => {\n      this.execute(\"GET SYSTEM STATE\").then((state: string) => {\n        if (state.trim() != this.state) {\n          this.onStateChange(state.trim());\n          this.state = state.trim();\n        }\n      });\n    }, 500);\n  }\n\n  async getSubjectName() {\n    //Promise<string> {\n    return await this.execute(\"Get Parameter SubjectName\");\n  }\n\n  async getTaskName() {\n    return await this.execute(\"Get Parameter DataFile\");\n  }\n\n  async getParameters() {\n    let parameters: any = await this.execute(\"List Parameters\");\n    let allData = parameters.split(\"\\n\");\n    let data = {};\n    let el;\n    allData.forEach(line => {\n      let descriptors = line.split(\"=\")[0]\n      let dataType = descriptors.split(\" \")[1]\n      let name = descriptors.split(\" \")[2]\n      let names = descriptors.split(\" \")[0].split(\":\");\n      names.forEach((x, i) =>{\n        switch(i){\n          case 0: {\n            if(data[names[0]]==undefined){\n              data[names[0]] = {}\n            }\n            el = data[names[0]]\n            break;\n          }\n          case 1: {\n            if(data[names[0]][names[1]]==undefined){\n            data[names[0]][names[1]] ={}\n            }\n            el = data[names[0]][names[1]]\n            break;\n          }\n          case 2: {\n            if(data[names[0]][names[1]][names[2]]==undefined){\n            data[names[0]][names[1]][names[2]] ={}\n            }\n            el = data[names[0]][names[1]][names[2]]\n            break;\n          }\n            default: {}\n          }\n      })\n\n      if(dataType != \"matrix\"){\n        if(line.split(\"=\")[1].split(\"//\")[0].trim().split(\" \").length == 4){\n          el[name] = {\n            dataType,\n            value: {\n              value: line.split(\"=\")[1].split(\"//\")[0].trim().split(\" \")[0],\n              defaultValue: line.split(\"=\")[1].split(\"//\")[0].trim().split(\" \")[1],\n              low:line.split(\"=\")[1].split(\"//\")[0].trim().split(\" \")[2],\n              high:line.split(\"=\")[1].split(\"//\")[0].trim().split(\" \")[3],\n            },\n            comment: line.split(\"=\")[1].split(\"//\")[1]\n          }\n        }\n        else{\n          el[name] = {\n            dataType,\n            value: line.split(\"=\")[1].split(\"//\")[0].trim(),\n            comment: line.split(\"=\")[1].split(\"//\")[1]\n        }\n      }\n      }\n      else{\n        el[name] = {\n          dataType,\n          value: line.split(\"=\")[1].split(\"//\")[0].trim(),\n          comment: line.split(\"=\")[1].split(\"//\")[1]\n        }  \n      }\n\n    });\n\n    return data\n  }\n}\n\nclass BCI2K_DataConnection {\n  _socket: WebSocket;\n  states: any;\n  signal: any;\n  signalProperties: any;\n  stateFormat: any;\n  stateVecOrder: any;\n  SignalType: any;\n  callingFrom: any;\n  onconnect: any;\n  onGenericSignal: any;\n  onStateVector: any;\n  onSignalProperties: any;\n  onStateFormat: any;\n  ondisconnect: any;\n  onReceiveBlock: any;\n  address: string;\n  constructor(address?: string) {\n    this._socket = null;\n\n    this.onconnect = () => {};\n    this.onGenericSignal = (data: any) => {};\n    this.onStateVector = (data: any) => {};\n    this.onSignalProperties = (data: any) => {};\n    this.onStateFormat = (data: any) => {};\n    this.ondisconnect = () => {};\n    this.onReceiveBlock = () => {};\n\n    this.callingFrom = \"\";\n\n    this.states = {};\n    this.signal = null;\n    this.signalProperties = null;\n    this.stateFormat = null;\n    this.stateVecOrder = null;\n\n    this.SignalType = {\n      INT16: 0,\n      FLOAT24: 1,\n      FLOAT32: 2,\n      INT32: 3,\n    };\n    this.address = address;\n  }\n\n  private getNullTermString(dv: DataView) {\n    var val = \"\";\n    let count = 0;\n    while (count < dv.byteLength) {\n      var v = dv.getUint8(count);\n      count++;\n      if (v == 0) break;\n      val += String.fromCharCode(v);\n    }\n    return val;\n  }\n\n  connect(address?: string, callingFrom?: string) {\n    let connection = this;\n    if (connection.address === undefined) connection.address = address;\n    this.callingFrom = callingFrom;\n    return new Promise<void>((resolve, reject) => {\n      connection._socket = new websocket(connection.address);\n      connection._socket.binaryType = \"arraybuffer\";\n\n      connection._socket.onerror = () => {\n        // This will only execute if we err before connecting, since\n        // Promises can only get triggered once\n        reject(\"Error connecting to data source at \" + connection.address);\n      };\n\n      connection._socket.onopen = () => {\n        connection.onconnect();\n        resolve();\n      };\n\n      connection._socket.onclose = (e) => {\n        connection.ondisconnect();\n        setTimeout(() => {\n          console.log(\"Disconnected\");\n          this.connect(\"\");\n        }, 1000);\n      };\n\n      connection._socket.onmessage = (event) => {\n        connection._decodeMessage(event.data);\n      };\n    });\n  }\n\n  connected(): boolean {\n    return this._socket != null && this._socket.readyState === websocket.OPEN;\n  }\n\n  private _decodeMessage(data: ArrayBuffer) {\n    let descriptor = new DataView(data, 0, 1).getUint8(0);\n    switch (descriptor) {\n      case 3:\n        let stateFormatView = new DataView(data, 1, data.byteLength - 1);\n        this._decodeStateFormat(stateFormatView);\n        break;\n\n      case 4:\n        let supplement = new DataView(data, 1, 2).getUint8(0);\n        switch (supplement) {\n          case 1:\n            let genericSignalView = new DataView(data, 2, data.byteLength - 2);\n            this._decodeGenericSignal(genericSignalView);\n            break;\n          case 3:\n            let signalPropertyView = new DataView(data, 2, data.byteLength - 2);\n            this._decodeSignalProperties(signalPropertyView);\n            break;\n          default:\n            console.error(\"Unsupported Supplement: \" + supplement.toString());\n            break;\n        }\n        this.onReceiveBlock();\n\n        break;\n\n      case 5:\n        let stateVectorView = new DataView(data, 1, data.byteLength - 1);\n        this._decodeStateVector(stateVectorView);\n        break;\n\n      default:\n        console.error(\"Unsupported Descriptor: \" + descriptor.toString());\n        break;\n    }\n  }\n\n  private _decodePhysicalUnits(unitstr: string) {\n    let units: any;\n    units = {};\n    let unit = unitstr.split(\" \");\n    let idx = 0;\n    units.offset = Number(unit[idx++]);\n    units.gain = Number(unit[idx++]);\n    units.symbol = unit[idx++];\n    units.vmin = Number(unit[idx++]);\n    units.vmax = Number(unit[idx++]);\n    return units;\n  }\n\n  private _decodeSignalProperties(data: DataView) {\n    let propstr = this.getNullTermString(data);\n    // Bugfix: There seems to not always be spaces after '{' characters\n    propstr = propstr.replace(/{/g, \" { \");\n    propstr = propstr.replace(/}/g, \" } \");\n\n    this.signalProperties = {};\n    let prop_tokens = propstr.split(\" \");\n    let props = [];\n    for (let i = 0; i < prop_tokens.length; i++) {\n      if (prop_tokens[i].trim() === \"\") continue;\n      props.push(prop_tokens[i]);\n    }\n\n    let pidx = 0;\n    this.signalProperties.name = props[pidx++];\n\n    this.signalProperties.channels = [];\n    if (props[pidx] === \"{\") {\n      while (props[++pidx] !== \"}\")\n        this.signalProperties.channels.push(props[pidx]);\n      pidx++; // }\n    } else {\n      let numChannels = parseInt(props[pidx++]);\n      for (let i = 0; i < numChannels; i++)\n        this.signalProperties.channels.push((i + 1).toString());\n    }\n\n    this.signalProperties.elements = [];\n    if (props[pidx] === \"{\") {\n      while (props[++pidx] !== \"}\")\n        this.signalProperties.elements.push(props[pidx]);\n      pidx++; // }\n    } else {\n      let numElements = parseInt(props[pidx++]);\n      for (let i = 0; i < numElements; i++)\n        this.signalProperties.elements.push((i + 1).toString());\n    }\n\n    // Backward Compatibility\n    this.signalProperties.numelements = this.signalProperties.elements.length;\n    this.signalProperties.signaltype = props[pidx++];\n    this.signalProperties.channelunit = this._decodePhysicalUnits(\n      props.slice(pidx, (pidx += 5)).join(\" \")\n    );\n\n    this.signalProperties.elementunit = this._decodePhysicalUnits(\n      props.slice(pidx, (pidx += 5)).join(\" \")\n    );\n\n    pidx++; // '{'\n\n    this.signalProperties.valueunits = [];\n    for (let i = 0; i < this.signalProperties.channels.length; i++)\n      this.signalProperties.valueunits.push(\n        this._decodePhysicalUnits(props.slice(pidx, (pidx += 5)).join(\" \"))\n      );\n\n    pidx++; // '}'\n    this.onSignalProperties(this.signalProperties);\n  }\n\n  private _decodeStateFormat(data: DataView) {\n    this.stateFormat = {};\n    let formatStr = this.getNullTermString(data);\n\n    let lines = formatStr.split(\"\\n\");\n    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {\n      if (lines[lineIdx].trim().length === 0) continue;\n      let stateline = lines[lineIdx].split(\" \");\n      let name = stateline[0];\n      this.stateFormat[name] = {};\n      this.stateFormat[name].bitWidth = parseInt(stateline[1]);\n      this.stateFormat[name].defaultValue = parseInt(stateline[2]);\n      this.stateFormat[name].byteLocation = parseInt(stateline[3]);\n      this.stateFormat[name].bitLocation = parseInt(stateline[4]);\n    }\n\n    let vecOrder = [];\n    for (let state in this.stateFormat) {\n      let loc = this.stateFormat[state].byteLocation * 8;\n      loc += this.stateFormat[state].bitLocation;\n      vecOrder.push([state, loc]);\n    }\n\n    // Sort by bit location\n    vecOrder.sort((a, b) => (a[1] < b[1] ? -1 : a[1] > b[1] ? 1 : 0));\n\n    // Create a list of ( state, bitwidth ) for decoding state vectors\n    this.stateVecOrder = [];\n    for (let i = 0; i < vecOrder.length; i++) {\n      let state = vecOrder[i][0];\n      this.stateVecOrder.push([state, this.stateFormat[state].bitWidth]);\n    }\n\n    this.onStateFormat(this.stateFormat);\n  }\n\n  private _decodeGenericSignal(data: DataView) {\n    let index = 0;\n    let signalType = data.getUint8(index);\n    index = index + 1;\n    let nChannels = data.getUint16(index, true);\n    index = index + 2;\n    let nElements = data.getUint16(index, true);\n    index = index + 2;\n    index = index + data.byteOffset;\n    let signalData = new DataView(data.buffer, index);\n    let signal = [];\n    for (let ch = 0; ch < nChannels; ++ch) {\n      signal.push([]);\n      for (let el = 0; el < nElements; ++el) {\n        switch (signalType) {\n          case this.SignalType.INT16:\n            signal[ch].push(\n              signalData.getInt16((nElements * ch + el) * 2, true)\n            );\n            break;\n\n          case this.SignalType.FLOAT32:\n            signal[ch].push(\n              signalData.getFloat32((nElements * ch + el) * 4, true)\n            );\n            break;\n\n          case this.SignalType.INT32:\n            signal[ch].push(\n              signalData.getInt32((nElements * ch + el) * 4, true)\n            );\n            break;\n\n          case this.SignalType.FLOAT24:\n            // TODO: Currently Unsupported\n            signal[ch].push(0.0);\n            break;\n          default:\n            break;\n        }\n      }\n    }\n    this.signal = signal;\n    this.onGenericSignal(signal);\n  }\n\n  private _decodeStateVector(dv: DataView) {\n    if (this.stateVecOrder == null) return;\n    // Currently, states are maximum 32 bit unsigned integers\n    // BitLocation 0 refers to the least significant bit of a byte in the packet\n    // ByteLocation 0 refers to the first byte in the sequence.\n    // Bits must be populated in increasing significance\n    let index = 1;\n    let _stateVectorLength = new DataView(dv.buffer, index, 2);\n    index = index + 3; //or 2???\n    let stateVectorLength = parseInt(\n      this.getNullTermString(_stateVectorLength)\n    );\n    let _numVectors = new DataView(dv.buffer, index, 2);\n    index = index + 3;\n    let numVectors = parseInt(this.getNullTermString(_numVectors));\n    let data = new DataView(dv.buffer, index);\n    let states = {};\n    for (let state in this.stateFormat) {\n      states[state] = Array(numVectors).fill(\n        this.stateFormat[state].defaultValue\n      );\n    }\n    for (let vecIdx = 0; vecIdx < numVectors; vecIdx++) {\n      let vec = new Uint8Array(\n        data.buffer,\n        data.byteOffset + vecIdx * stateVectorLength,\n        stateVectorLength\n      );\n      let bits = [];\n      for (let byteIdx = 0; byteIdx < vec.length; byteIdx++) {\n        bits.push((vec[byteIdx] & 0x01) !== 0 ? 1 : 0);\n        bits.push((vec[byteIdx] & 0x02) !== 0 ? 1 : 0);\n        bits.push((vec[byteIdx] & 0x04) !== 0 ? 1 : 0);\n        bits.push((vec[byteIdx] & 0x08) !== 0 ? 1 : 0);\n        bits.push((vec[byteIdx] & 0x10) !== 0 ? 1 : 0);\n        bits.push((vec[byteIdx] & 0x20) !== 0 ? 1 : 0);\n        bits.push((vec[byteIdx] & 0x40) !== 0 ? 1 : 0);\n        bits.push((vec[byteIdx] & 0x80) !== 0 ? 1 : 0);\n      }\n\n      for (let stateIdx = 0; stateIdx < this.stateVecOrder.length; stateIdx++) {\n        let fmt = this.stateFormat[this.stateVecOrder[stateIdx][0]];\n        let offset = fmt.byteLocation * 8 + fmt.bitLocation;\n        let val = 0;\n        let mask = 0x01;\n        for (let bIdx = 0; bIdx < fmt.bitWidth; bIdx++) {\n          if (bits[offset + bIdx]) val = (val | mask) >>> 0;\n          mask = (mask << 1) >>> 0;\n        }\n        states[this.stateVecOrder[stateIdx][0]][vecIdx] = val;\n      }\n    }\n    this.onStateVector(states);\n    this.states = states;\n  }\n}\n\nmodule.exports = {\n  bciOperator: BCI2K_OperatorConnection,\n  bciData: BCI2K_DataConnection,\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;"],"sourceRoot":""}